<style>
    .slider.slider-horizontal {
        width: 100%;
    }

    .slider-selection {
        background: pink;
        box-shadow: unset;
    }

    .slider-handle {
        background: lightpink;
        box-shadow: 0 0 5px grey;
    }

</style>

<div>
    <div class="row pt-3">
        <h5 class="xt-title">Password Generator</h5>
    </div>

    <form>
        <div class="form-group">
            <label for="range1"></label>
            <input id="range1" type="range" data-slider-min="4" data-slider-max="64" data-slider-step="1" data-slider-value="8" />
        </div>

        <div class="form-group">
            <label for="output1">output</label>
            <textarea class="form-control" id="output1" rows="6"></textarea>
        </div>

        <button type="button" class="btn btn-primary d-none" id="copy-button">Copy</button>
    </form>
</div>

<script>
    "use strict"

    window.partObject = (function() {
        return {
            init: init,
            activate: activate,
            deactivate: deactivate
        }

        function init() {
            if (navigator.clipboard) {
                document.getElementById("copy-button").classList.remove("d-none")
            }

            // NOTE: tooltip not work with bootstrap 4
            // SEE: https://github.com/seiyria/bootstrap-slider/issues/689
            // SEE: https://github.com/seiyria/bootstrap-slider#options
            let slider1 = new Slider('#range1', {
                tooltip: 'hide'
            }).on('change', onChangeSlide)

            updateLengthLabel(slider1.getValue())
        }

        function activate() {
            document.getElementById("copy-button").addEventListener("click", onCopy)
        }

        function deactivate() {
            document.getElementById("copy-button").removeEventListener("click", onCopy)
        }

        function onCopy() {
            let output = document.getElementById("output1").value

            navigator.clipboard && navigator.clipboard.writeText(output).then(function() {
                xdialog.info("clipboard successfully set")
            }, function() {
                xdialog.warn("clipboard write failed")
            })
        }

        function onChangeSlide(e) {
            updateLengthLabel(e.newValue)
        }

        function updateLengthLabel(length) {
            document.querySelector('[for="range1"]').textContent = "Length: " + length
        }
    })()

</script>
